{% extends "../layouts/ukti-search-header.html" %}
{% import "macros/forms.html" as forms %}

{% block main %}

  {% if contact.id %}
    {% set backUrl = "/companies/" + company.id + "/contact/view/" + contact.id + "?query=" + query %}
    <a class="back-link" href="{{ backUrl }}">Back to contact</a>
    {{ forms.errorPanel(errors) }}
    <h1 class="heading-xlarge record-title">Edit contact details</h1>
  {% else %}
    {% set backUrl = "/companies/" +  company.id + "?query=" + query + "#contacts" %}
    <a class="back-link" href="{{ backUrl }}">Back to company</a>
    {{ forms.errorPanel(errors) }}
    <h1 class="heading-xlarge record-title">Add contact</h1>
  {% endif %}

  <form method="post">
    {{ forms.textbox('title', label="Title (optional)", value=contact.title, error=errors.title) }}
    {{ forms.textbox('firstname', label="First name", value=contact.firstname, error=errors.firstname) }}
    {{ forms.textbox('lastname', label="Last name", value=contact.lastname, error=errors.lastname) }}
    {{ forms.textbox('occupation', label="Role", value=contact.occupation, error=errors.occupation) }}
    {{ forms.yesNo('primaryContact', label="Is this person a primary contact?", radioValue=contact.primaryContact, error=errors.primaryContact) }}
    {{ forms.textbox('telephonenumber', label="Phone", value=contact.telephonenumber, error=errors.telephonenumber) }}
    {{ forms.textbox('emailaddress', label="Email address", value=contact.emailaddress, error=errors.emailaddress) }}
    {{ forms.address('address', label="Address", value=contact.address, error=errors.address_address1) }}
    {{ forms.textbox('alternativeTelephonenumber', label="Alternative phone (optional)", value=contact.alternativeTelephonenumber, error=errors.alternativeTelephonenumber) }}
    {{ forms.textbox('alternativeEmailaddress', label="Alternative email (optional)", value=contact.alternativeEmailaddress, error=errors.alternativeEmailaddress) }}
    {{ forms.textarea('notes', label="Notes (optional)", value=contact.notes, error=errors.notes) }}

    {{ forms.save(backUrl=backUrl) }}

  </form>
{% endblock %}
X
