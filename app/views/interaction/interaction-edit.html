{% extends "../layouts/ukti-search-header.html" %}
{% import "macros/forms.html" as forms %}

{% block main %}

  {% if interactionId %}
    <a class="back-link" href="{{ backUrl }}">Back to interaction</a>
    {{ forms.errorPanel(errors) }}
    <h1 class="heading-xlarge record-title">Edit interaction details</h1>
  {% else %}
    <a class="back-link" href="{{ backUrl }}">Back</a>
    {{ forms.errorPanel(errors) }}
    <h1 class="heading-xlarge record-title">Add interaction</h1>
  {% endif %}

  <h2 class="heading-small">Company</h2>
  <p>
    <a href="/companies/{{ company.id }}?query={{ query }}">{{ company.title }}</a>
  </p>

  <form method="post">
    {{ forms.dropdown('type',
      label="InteractionType",
      emptyLabel="Select an interaction type",
      value=interaction.type,
      options=INTERACTION_TYPES,
      error=errors.type
    ) }}

    {{ forms.textbox('subject', label="Subject", value=interaction.subject, error=errors.subject) }}
    {{ forms.date(name='date', label='Date of interaction', value=interaction.date, error=errors.date) }}

    {{ forms.autocomplete('contactId',
      label="Company contact",
      value=contact.id,
      options=contactOptions,
      error=error.errors.contactId
    ) }}

    {{ forms.autocomplete('advisor',
      label="UKTI advisor",
      value=interaction.advisor,
      options=ADVISORS,
      error=errors.advisor
    ) }}

    {{ forms.textarea('notes', label="Interaction notes", value=interaction.notes, error=errors.notes) }}
    {{ forms.textbox('serviceOffer', label="Service offer", value=interaction.serviceOffer, error=errors.serviceOffer) }}
    {{ forms.textbox('serviceProvider', label="Service provider", value=interaction.serviceProvider, error=errors.serviceProvider) }}

    {{ forms.save(backUrl=backUrl) }}

  </form>


{% endblock %}
